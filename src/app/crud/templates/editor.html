<div class="panel-body">
  <div class="editor visible" ng-class="{'editor-error' : ($ctrl.isModified() && !$ctrl.valid)}">
    <div class="editor-buttons clearfix">
      <button ng-if="!$ctrl.inEdit && !$ctrl.readOnly()" class="btn btn-small btn-primary pull-right" type="submit" ng-click="$ctrl.startEdit()">
          Edit
      </button>
      <button class="btn btn-small btn-success pull-right" type="submit" ng-if="$ctrl.inEdit && !(!$ctrl.isModified() || !$ctrl.valid)" ng-click="$ctrl.save()">
          Save
      </button>
      <button ng-if="$ctrl.inEdit" class="btn btn-small btn-primary pull-right" type="submit" ng-click="$ctrl.cancel()">
          Cancel
      </button>
    </div>
    <div id="editor"
      ui-ace="$ctrl.editor"
      ng-model="$ctrl.source"
      ng-change="$ctrl.validate($event)"
      ng-readonly="!$ctrl.inEdit">
    </div>
  </div>
  <div class="editor" ng-class="{'visible' : $ctrl.activeRevisiton.source}">
    <div class="editor-buttons clearfix">
      <button class="btn btn-small btn-primary pull-right" ng-click="$ctrl.copyRevisionContent()" ng-if="$ctrl.activeRevisiton.source">
        Use revision
      </button>
      <button class="btn btn-small btn-primary pull-right" ng-click="$ctrl.closeRevision()" ng-if="$ctrl.activeRevisiton.source">
        Close
      </button>
    </div>
    <div ui-ace="$ctrl.editor" ng-model="$ctrl.activeRevisiton.source" ng-readonly="true">
    </div>
  </div>
</div>
